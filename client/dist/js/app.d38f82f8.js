(function(t){function e(e){for(var s,r,n=e[0],d=e[1],l=e[2],u=0,m=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(t[s]=d[s]);c&&c(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var d=a[n];0!==o[d]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},o={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],d=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var c=d;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),o=a.n(s);o.a},"158c":function(t,e,a){"use strict";var s=a("ce1b"),o=a.n(s);o.a},3321:function(t,e,a){t.exports=a.p+"img/logofixed.d912442e.png"},3712:function(t,e,a){},"3b8a":function(t,e,a){"use strict";var s=a("3712"),o=a.n(s);o.a},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r={name:"App"},n=r,d=(a("034f"),a("2877")),l=Object(d["a"])(n,o,i,!1,null,null,null),c=l.exports,u=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{"background-image":"url(https://scottcoyneunderdev.files.wordpress.com/2015/02/dark-wood-high-quality-wallpaper-hd-resolution3.jpg)"},attrs:{id:"bg"}},[a("div",{staticClass:"boards row"},[a("div",{staticClass:"col-12"},[a("h3",{staticStyle:{color:"white"},attrs:{id:"logoutButton"}},[t._v(" Hey there "+t._s(t.user.name)+"!   "),a("button",{staticClass:"btn btn-dark",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Logout")])])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"col-12"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.addBoard(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newBoard.title,expression:"newBoard.title"}],attrs:{type:"text",placeholder:"title",required:""},domProps:{value:t.newBoard.title},on:{input:function(e){e.target.composing||t.$set(t.newBoard,"title",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newBoard.description,expression:"newBoard.description"}],attrs:{type:"text",placeholder:"description"},domProps:{value:t.newBoard.description},on:{input:function(e){e.target.composing||t.$set(t.newBoard,"description",e.target.value)}}}),t._v(" "),a("button",{attrs:{type:"submit"}},[t._v("Create Board")])])]),t._v(" "),a("div",{style:{"background-image":"url(https://img.glyphs.co/img?src=aHR0cHM6Ly9zMy5tZWRpYWxvb3QuY29tL3Jlc291cmNlcy9EYXJrLUNydW1wbGVkLVBhcGVyLVRleHR1cmVzLVByZXZpZXctMS5qcGc&q=90&enlarge=true&h=1036&w=1600)"},attrs:{id:"chalkboard"}},t._l(t.boards,(function(e){return a("div",{key:e._id},[a("router-link",{attrs:{to:{name:"board",params:{boardId:e._id}}}},[a("b",{staticStyle:{color:"white"}},[t._v(t._s(e.title))])]),t._v(" "),a("i",{staticClass:"fas fa-trash-alt",staticStyle:{color:"red"},on:{click:function(a){a.preventDefault(),t.deleteBoard(e)}}})],1)})))])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("h1",{staticStyle:{color:"white"}},[t._v("Welcome to your Drop Stone Boards")])])}],h={name:"boards",mounted(){this.$store.dispatch("getBoards")},data(){return{newBoard:{title:"",description:""}}},computed:{user(){return this.$store.state.user},boards(){return this.$store.state.boards}},methods:{addBoard(){this.$store.dispatch("addBoard",this.newBoard),this.newBoard={title:"",description:""}},logout(){this.$store.dispatch("logout"),location.reload()},deleteBoard(t){this.$store.dispatch("deleteBoard",t)}}},v=h,g=(a("3b8a"),Object(d["a"])(v,m,p,!1,null,null,null)),f=g.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{style:{"background-image":"url(https://scottcoyneunderdev.files.wordpress.com/2015/02/dark-wood-high-quality-wallpaper-hd-resolution3.jpg)"},attrs:{id:"bg"}},[s("div",{staticClass:"conatiner-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12",attrs:{id:"home-boards"}},[s("router-link",{attrs:{to:{name:"boards"}}},[s("img",{attrs:{id:"logo-button",src:a("3321"),alt:""}})])],1),t._v(" "),s("div",{staticClass:"col-12",staticStyle:{color:"white"}},[s("h2",[t._v(t._s(t.board.title))])]),t._v(" "),s("div",{staticClass:"col-12",staticStyle:{color:"white"}},[s("h4",[t._v(t._s(t.board.description))])]),t._v(" "),s("div",{staticClass:"col-12",staticStyle:{color:"white"}},[s("button",{staticClass:"btn btn-dark",on:{click:function(e){return e.preventDefault(),t.show(e)}}},[t._v("add list")]),t._v(" "),s("modal",{attrs:{name:"addListModal"}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.addList(e)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newList.title,expression:"newList.title"}],attrs:{name:"title",type:"text",required:"",placeholder:"List Title..."},domProps:{value:t.newList.title},on:{input:function(e){e.target.composing||t.$set(t.newList,"title",e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-dark",attrs:{type:"submit"},on:{click:t.hide}},[t._v("Add List")])])])],1)])]),t._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3",attrs:{id:"list-body"}},t._l(t.lists,(function(e){return s("drop",{key:e._id,on:{dragleave:function(e){t.over=!1},dragover:function(e){t.over=!0},drop:function(a){var s=arguments.length,o=Array(s);while(s--)o[s]=arguments[s];t.moveTask.apply(void 0,[e].concat(o))}}},[s("lists",{attrs:{listData:e}})],1)})))])])])},b=[],w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-body",style:{"background-image":"url(https://us.123rf.com/450wm/yamabikay/yamabikay1802/yamabikay180200158/96042907-dark-grey-paper-background-texture-close-up-high-resolution-photo-.jpg?ver=6)"}},[a("h5",{staticClass:"card-title"},[t._v("\n      "+t._s(t.listData.title)+"\n      "),a("h6",{staticClass:"fas fa-trash-alt",staticStyle:{color:"red"},on:{click:function(e){e.preventDefault(),t.deleteList(t.listData)}}})]),t._v(" "),t._l(t.tasks,(function(t){return a("drag",{key:t._id,attrs:{"transfer-data":{task:t}}},[a("task",{attrs:{taskData:t}})],1)})),t._v(" "),a("button",{staticClass:"btn btn-dark",attrs:{id:"task-button"},on:{click:function(e){return e.preventDefault(),t.showTask(e)}}},[t._v("Add Task")]),t._v(" "),a("modal",{attrs:{name:t.listData.id}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.addTask(e)}}},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTask.title,expression:"newTask.title"}],attrs:{name:"title",type:"text",required:"",placeholder:"Task Title..."},domProps:{value:t.newTask.title},on:{input:function(e){e.target.composing||t.$set(t.newTask,"title",e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-dark",attrs:{type:"submit"},on:{click:t.hideTask}},[t._v("Add Task")])])])],2)])},y=[],_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body",style:{"background-image":"url(https://previews.123rf.com/images/yamabikay/yamabikay1708/yamabikay170800397/84636276-gray-recycled-paper-texture-with-copy-space-high-resolution-photo-.jpg)"}},[a("ul",[a("li",[a("h5",[t._v(t._s(t.taskData.title))]),t._v(" "),a("i",{staticClass:"fas fa-trash-alt",staticStyle:{color:"red"},on:{click:function(e){e.preventDefault(),t.deleteTask(t.taskData)}}}),t._v(" "),a("i",{staticClass:"fas fa-edit",staticStyle:{color:"green"},on:{click:function(e){return e.preventDefault(),t.showEditTask(e)}}}),t._v(" "),a("ol",t._l(t.taskData.comments,(function(e){return a("li",{key:e._id},[a("b",[t._v(t._s(e.name))]),t._v(" "),a("i",{staticClass:"fas fa-trash-alt",staticStyle:{color:"red"},on:{click:function(a){a.preventDefault(),t.deleteComment(e)}}})])})))])]),t._v(" "),a("modal",{attrs:{name:t.taskData.id}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.editTask(e)}}},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editedTask.title,expression:"editedTask.title"}],attrs:{name:"title",type:"text",required:"",placeholder:"Task Title..."},domProps:{value:t.editedTask.title},on:{input:function(e){e.target.composing||t.$set(t.editedTask,"title",e.target.value)}}})]),t._v(" "),a("button",{attrs:{type:"submit"},on:{click:t.hideEditTask}},[t._v("Add List")])])]),t._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:t.showAddComment}},[t._v("Comment")]),t._v(" "),a("modal",{attrs:{name:"com"+t.taskData.id}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.addComment(e)}}},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.name,expression:"comment.name"}],attrs:{name:"commentTitle",type:"text",required:"",placeholder:"Comment..."},domProps:{value:t.comment.name},on:{input:function(e){e.target.composing||t.$set(t.comment,"name",e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-dark",attrs:{type:"submit"},on:{click:t.hideAddComment}},[t._v("Comment")])])])],1)])])])},$=[],C={name:"Tasks",props:["taskData"],data(){return{editedTask:{title:"",authorId:this.taskData.authorId,listId:this.taskData.listId,boardId:this.taskData.boardId,taskId:this.taskData.id,comments:this.taskData.comments},comment:{listId:this.taskData.listId,taskId:this.taskData.id,boardId:this.taskData.boardId}}},components:{},methods:{deleteTask(t){console.log("taskData",t),this.$store.dispatch("deleteTask",t)},deleteComment(t){console.log("this is what we want",t),this.$store.dispatch("deleteComment",t)},editTask(){let t={...this.editedTask};console.log(this.taskData.comments),this.editedTask={title:this.title,authorId:this.taskData.authorId,boardId:this.taskData.boardId,listId:this.taskData.listId,taskId:this.taskData.id,comments:this.taskData.comments},this.$store.dispatch("editTask",t),console.log("this is the new edited version",t)},addComment(){let t={...this.comment};t.taskId=this.taskData.id,t.authorId=this.taskData.authorId,t.boardId=this.taskData.boardId,this.comment={name:this.commentTitle},this.$store.dispatch("addComment",t)},showEditTask(){this.$modal.show(this.taskData.id)},hideEditTask(){this.$modal.hide(this.taskData.id)},showAddComment(){console.log("the comment modal ","com"+this.taskData.id),this.$modal.show("com"+this.taskData.id)},hideAddComment(){this.$modal.hide("com"+this.taskData.id)}},computed:{lists(){return this.$store.state.lists}}},D=C,T=Object(d["a"])(D,_,$,!1,null,null,null),I=T.exports,L=a("df76"),x={name:"Lists",props:["listData"],data(){return{newTask:{}}},mounted(){},components:{task:I,Drag:L["Drag"],Drop:L["Drop"]},methods:{addTask(){console.log("made it to the addTask function from the modal");let t={...this.newTask};t.listId=this.listData.id,t.boardId=this.$route.params.boardId,this.newTask={title:"",authorId:this.$store.state.user._id,listId:this.listData.id},this.$store.dispatch("addTask",t)},showTask(){this.$modal.show(this.listData.id)},hideTask(){this.$modal.hide(this.listData.id)},deleteList(t){this.$store.dispatch("deleteList",t)}},computed:{tasks(){return this.$store.state.tasks.filter(t=>t.listId==this.listData._id)}}},B=x,U=(a("f62b"),Object(d["a"])(B,w,y,!1,null,null,null)),j=U.exports,S={name:"board",data(){return{newList:{title:"",authorId:this.$store.state.user._id,boardId:this.$route.params.boardId}}},mounted(){this.$store.dispatch("getBoards"),this.$store.dispatch("getLists",{boardId:this.$route.params.boardId,authorId:this.$store.state.user._id}),this.$store.dispatch("getTasks",{boardId:this.$route.params.boardId,authorId:this.$store.state.user._id})},computed:{board(){return this.$store.state.boards.find(t=>t._id==this.boardId)||{title:"Loading..."}},lists(){return this.$store.state.lists}},props:["boardId"],methods:{addList(){let t={...this.newList};this.$store.dispatch("addList",t),this.newList={title:"",authorId:this.$store.state.user._id,boardId:this.$route.params.boardId}},moveTask(t,e){let a={title:e.task.title,authorId:e.task.authorId,boardId:e.task.boardId,listId:t._id,id:e.task.id,comments:e.task.comments};console.log("from List",t),console.log(e),console.log("final task",a),this.$store.dispatch("moveTask",a)},show(){this.$modal.show("addListModal")},hide(){this.$modal.hide("addListModal")}},components:{lists:j,Drag:L["Drag"],Drop:L["Drop"]}},N=S,P=(a("158c"),Object(d["a"])(N,k,b,!1,null,null,null)),O=P.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login d-flex justify-content-center align-items-center"},[s("div",{style:{"background-image":"url(https://scottcoyneunderdev.files.wordpress.com/2015/02/dark-wood-high-quality-wallpaper-hd-resolution3.jpg)"},attrs:{id:"bg"}},[s("img",{attrs:{id:"login-logo",src:a("cf05"),alt:""}}),t._v(" "),t.loginForm?s("form",{on:{submit:function(e){return e.preventDefault(),t.loginUser(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.creds.email,expression:"creds.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:t.creds.email},on:{input:function(e){e.target.composing||t.$set(t.creds,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.creds.password,expression:"creds.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.creds.password},on:{input:function(e){e.target.composing||t.$set(t.creds,"password",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-dark",attrs:{type:"submit"}},[t._v("Login")])]):s("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.name,expression:"newUser.name"}],attrs:{type:"text",placeholder:"name"},domProps:{value:t.newUser.name},on:{input:function(e){e.target.composing||t.$set(t.newUser,"name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.email,expression:"newUser.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:t.newUser.email},on:{input:function(e){e.target.composing||t.$set(t.newUser,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.password,expression:"newUser.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.newUser.password},on:{input:function(e){e.target.composing||t.$set(t.newUser,"password",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-warning",attrs:{type:"submit"}},[t._v("Create Account")])]),t._v(" "),s("div",{staticClass:"action",on:{click:function(e){t.loginForm=!t.loginForm}}},[t.loginForm?s("p",{staticClass:"logintext"},[t._v("No account? Click here to Register")]):s("p",{staticClass:"logintext"},[t._v("Already have an account? Click here to Login")])])])])},E=[],q={name:"login",data(){return{loginForm:!0,creds:{email:"",password:""},newUser:{email:"",password:"",name:""},image:""}},beforeCreate(){this.$store.state.user._id&&this.$router.push({name:"boards"})},methods:{register(){this.$store.dispatch("register",this.newUser)},loginUser(){this.$store.dispatch("login",this.creds)}}},M=q,R=(a("d6db"),Object(d["a"])(M,A,E,!1,null,null,null)),V=R.exports;s["a"].use(u["a"]);var F=new u["a"]({routes:[{path:"/",name:"boards",component:f},{path:"/boards/:boardId",name:"board",props:!0,component:O},{path:"/login",name:"login",component:V},{path:"*",redirect:"/"}]}),H=a("2f62"),J=a("bc3a"),W=a.n(J);let Z=location.host.includes("localhost")?"//localhost:3000/":"/",G=W.a.create({baseURL:Z+"account/",timeout:3e3,withCredentials:!0});class X{static async Login(t){try{let e=await G.post("login",t);return e.data}catch(e){throw new Error(`[login failed] : ${e.response?e.response.data.error:"No response from server"}`)}}static async Register(t){try{let e=await G.post("register",t);return e.data}catch(e){throw new Error(`[registration failed] : ${e.response?e.response.data.error:"No response from server"}`)}}static async Logout(){try{await G.delete("logout");return!0}catch(t){throw new Error(`[logout failed] : ${t.response?t.response.data.error:"No response from server"}`)}}static async Authenticate(){try{let t=await G.get("authenticate");return t.data}catch(t){console.warn(`[Authentication failed] : ${t.response?t.response.data.error:"No response from server"}`)}}}s["a"].use(H["a"]);let Y=window.location.host.includes("localhost:8080")?"//localhost:3000/":"/",z=W.a.create({baseURL:Y+"api/",timeout:3e3,withCredentials:!0});var Q=new H["a"].Store({state:{user:{},boards:[],lists:[],tasks:[]},mutations:{setUser(t,e){t.user=e},setBoards(t,e){t.boards=e},addList(t,e){t.lists=e},setTasks(t,e){t.tasks=e},addTask(t,e){t.tasks.push(e)}},actions:{async register({commit:t,dispatch:e},a){try{let e=await X.Register(a);t("setUser",e),F.push({name:"boards"})}catch(s){console.warn(s.message)}},async login({commit:t,dispatch:e},a){try{let e=await X.Login(a);t("setUser",e),F.push({name:"boards"})}catch(s){console.warn(s.message)}},async logout({commit:t,dispatch:e}){try{await X.Logout();t("resetState"),F.push({name:"login"})}catch(a){console.warn(a.message)}},getBoards({commit:t,dispatch:e}){z.get("boards").then(e=>{t("setBoards",e.data)})},addBoard({commit:t,dispatch:e},a){z.post("boards",a).then(t=>{e("getBoards")})},async addList({commit:t,dispatch:e},a){await z.post("lists",a);e("getLists",a)},async getLists({commit:t,dispatch:e},a){let s=await z.get("boards/"+a.boardId+"/lists");t("addList",s.data)},async addTask({commit:t,dispatch:e},a){let s=await z.post("tasks",a);t("addTask",s.data)},async addComment({commit:t,dispatch:e},a){console.log("actual comment before sending up",a);let s=await z.post("tasks/"+a.taskId,a);console.log("comment res",s.data),e("getTasks",a)},async getTasks({commit:t,dispatch:e},a){let s=await z.get("tasks?boardId="+a.boardId);t("setTasks",s.data)},async deleteTask({commit:t,dispatch:e},a){await z.delete("tasks/"+a._id),e("getTasks",a)},async editTask({commit:t,dispatch:e},a){await z.put("tasks/"+a.taskId,a);console.log(a),e("getTasks",a)},async moveTask({commit:t,dispatch:e},a){console.log("store movedtask",a);await z.put("tasks/"+a.id,a);e("getTasks",a)},async deleteList({commit:t,dispatch:e},a){await z.delete("lists/"+a._id),e("getLists",a)},async deleteBoard({commit:t,dispatch:e},a){await z.delete("boards/"+a._id),e("getBoards",a)},async deleteComment({commit:t,dispatch:e},a){console.log(a),await z.put("tasks/"+a.taskId+"/comments/"+a._id,a),e("getTasks",a)}}}),K=a("1881"),tt=a.n(K);async function et(){let t=await X.Authenticate();t?Q.commit("setUser",t):F.push({name:"login"}),new s["a"]({router:F,store:Q,render:t=>t(c)}).$mount("#app")}s["a"].use(tt.a),et()},"65da":function(t,e,a){},"85ec":function(t,e,a){},ce1b:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"img/logo.7966f716.png"},d6db:function(t,e,a){"use strict";var s=a("e67a"),o=a.n(s);o.a},e67a:function(t,e,a){},f62b:function(t,e,a){"use strict";var s=a("65da"),o=a.n(s);o.a}});
//# sourceMappingURL=app.d38f82f8.js.map